@import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@600;700;800&family=JetBrains+Mono:wght@400;500&family=Inter:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('./styles/touch-optimization.css');

/* ═══════════════════════════════════════════════════════════════
   THEME VARIABLES
   :root = Light Theme (Tailwind convention)
   .dark = Dark Theme
   ═══════════════════════════════════════════════════════════════ */

:root {
  /* Typography */
  --font-heading: 'Barlow Condensed', sans-serif;
  --font-body: 'Inter', -apple-system, blinkmacsystemfont, sans-serif;
  --font-mono: 'JetBrains Mono', monospace;

  /* Brand Colors - Emergent/restin.ai Premium Red */
  --brand-accent: #E53935;
  --brand-accent-hover: #C62828;
  --brand-accent-soft: rgb(229 57 53 / 15%);
  --brand-accent-glow: rgb(229 57 53 / 40%);

  /* Light Theme (Default) */
  --background: #FFFFFF;
  --foreground: #09090B;
  --card: #F8F9FA;
  --card-foreground: #09090B;
  --popover: #FFFFFF;
  --popover-foreground: #09090B;
  --primary: #E53935;
  --primary-foreground: #FFF;
  --secondary: #F1F5F9;
  --secondary-foreground: #0F172A;
  --muted: #F1F5F9;
  --muted-foreground: #64748B;
  --accent: #E53935;
  --accent-foreground: #FFF;
  --destructive: #EF4444;
  --destructive-foreground: #FFF;
  --border: #E2E8F0;
  --input: #E2E8F0;
  --ring: #E53935;
  --sidebar: #FAFAFA;
  --sidebarBorder: #E2E8F0;
  --sidebarText: #334155;
  --sidebarActive: #FEF2F2;
  --sidebarActiveText: #E53935;

  /* Semantic Text Colors (Light Mode) */
  --text-primary: #09090B;
  --text-secondary: #475569;
  --text-muted: #94A3B8;
  --text-on-brand: #FFFFFF;
  --text-on-dark-bg: #F5F5F7;

  /* Radius */
  --radius: 0.5rem;
}

.dark {
  /* Dark Theme Override */
  --background: #0A0A0B;
  --foreground: #F5F5F7;
  --card: #18181B;
  --card-foreground: #F5F5F7;
  --popover: #1C1C1F;
  --popover-foreground: #F5F5F7;
  --primary: #E53935;
  --primary-foreground: #FFF;
  --secondary: #27272A;
  --secondary-foreground: #F5F5F7;
  --muted: #27272A;
  --muted-foreground: #A1A1AA;
  --accent: #E53935;
  --accent-foreground: #FFF;
  --destructive: #DC2626;
  --destructive-foreground: #FFF;
  --border: #27272A;
  --input: #27272A;
  --ring: #E53935;
  --sidebar: #0F0F10;
  --sidebarBorder: #27272A;
  --sidebarText: #D4D4D8;
  --sidebarActive: #1C0606;
  --sidebarActiveText: #E53935;

  /* Semantic Text Colors (Dark Mode) */
  --text-primary: #F5F5F7;
  --text-secondary: #A1A1AA;
  --text-muted: #71717A;
  --text-on-brand: #FFFFFF;
  --text-on-dark-bg: #F5F5F7;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: var(--font-body);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: var(--font-mono);
}

/* Typography */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: var(--font-heading);
  text-transform: uppercase;
  letter-spacing: -0.025em;
  font-weight: 700;
}

.font-mono {
  font-family: var(--font-mono) !important;
}

.font-heading {
  font-family: var(--font-heading);
}

/* ═══════════════════════════════════════════════════════════════
   SCROLLBAR STYLING
   ═══════════════════════════════════════════════════════════════ */

/* Light mode scrollbar */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: #F1F5F9;
  border-radius: 5px;
}

::-webkit-scrollbar-thumb {
  background: #CBD5E1;
  border-radius: 5px;
  border: 2px solid #F1F5F9;
}

::-webkit-scrollbar-thumb:hover {
  background: #94A3B8;
}

::-webkit-scrollbar-thumb:active {
  background: var(--brand-accent);
}

/* Dark mode scrollbar */
.dark ::-webkit-scrollbar-track {
  background: #18181B;
}

.dark ::-webkit-scrollbar-thumb {
  background: #3F3F46;
  border-color: #18181B;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: #52525B;
}

/* ═══════════════════════════════════════════════════════════════
   ANIMATIONS
   ═══════════════════════════════════════════════════════════════ */

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse-glow {

  0%,
  100% {
    box-shadow: 0 0 0 0 var(--brand-accent-soft);
  }

  50% {
    box-shadow: 0 0 20px 4px var(--brand-accent-glow);
  }
}

@keyframes shake {

  0%,
  100% {
    transform: translateX(0);
  }

  25% {
    transform: translateX(-8px);
  }

  75% {
    transform: translateX(8px);
  }
}

@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }

  100% {
    background-position: 1000px 0;
  }
}

@keyframes success-pulse {
  0% {
    transform: scale(1);
    opacity: 1;
  }

  50% {
    transform: scale(1.05);
    opacity: 0.8;
  }

  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Responsive utilities */
.safe-area-inset-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

/* Touch targets - minimum 44x44px for mobile */
@media (width <=768px) {

  button,
  a[role="\"button\""] {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Smooth transitions */
* {
  transition-property: background-color, border-color, color, fill, stroke;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out;
}

.animate-pulse-glow {
  animation: pulse-glow 2s infinite;
}

.animate-shake {
  animation: shake 0.3s ease-in-out;
}

.animate-shimmer {
  animation: shimmer 2s infinite linear;
  background: linear-gradient(90deg,
      transparent 0%,
      var(--brand-accent-soft) 50%,
      transparent 100%);
  background-size: 1000px 100%;
}

.animate-success-pulse {
  animation: success-pulse 0.4s ease-out;
}

/* ═══════════════════════════════════════════════════════════════
   THEME-AWARE COMPONENT STYLES
   ═══════════════════════════════════════════════════════════════ */

/* Glass morphism */
.glass {
  -webkit-backdrop-filter: blur(20px);
  backdrop-filter: blur(20px);
  background: var(--popover);
  border: 1px solid var(--border);
}

.dark .glass {
  background: rgb(10 10 11 / 85%);
  border: 1px solid rgb(229 57 53 / 10%);
}

/* ── Button Styles ── */

/* POS Button — dark stays dark (POS is always dark-themed) */
.btn-pos {
  @apply bg-zinc-900 hover:bg-zinc-800 border border-white/10 text-white font-bold uppercase tracking-wide transition-all duration-150;

  box-shadow: 0 1px 3px rgb(0 0 0 / 30%);
}

.btn-pos:hover {
  box-shadow: 0 0 12px var(--brand-accent-soft);
}

.btn-pos:active {
  @apply bg-zinc-700;

  transform: scale(0.98);
}

.btn-pos-active {
  @apply text-white border-transparent;

  background: linear-gradient(135deg, var(--brand-accent) 0%, var(--brand-accent-hover) 100%);
  box-shadow: 0 0 20px var(--brand-accent-glow);
}

.btn-primary {
  @apply text-white font-bold uppercase tracking-wide transition-all duration-150;

  background: linear-gradient(135deg, var(--brand-accent) 0%, var(--brand-accent-hover) 100%);
  box-shadow: 0 4px 12px var(--brand-accent-soft);
}

.btn-primary:hover {
  box-shadow: 0 6px 20px var(--brand-accent-glow);
  transform: translateY(-1px);
}

.btn-primary:active {
  transform: translateY(0) scale(0.98);
}

/* Secondary button — theme-aware */
.btn-secondary {
  @apply transition-all duration-150;

  background: var(--secondary);
  color: var(--secondary-foreground);
  border: 1px solid var(--border);
}

.btn-secondary:hover {
  border-color: var(--brand-accent);
  box-shadow: 0 0 8px var(--brand-accent-soft);
}

/* Destructive button — theme-aware */
.btn-destructive {
  @apply transition-all duration-150;

  background: rgb(220 38 38 / 8%);
  color: #EF4444;
  border: 1px solid rgb(220 38 38 / 20%);
}

.dark .btn-destructive {
  @apply bg-red-950/50 text-red-300 border border-red-500/30 hover:bg-red-950;
}

/* ── Card Styles ── */

.card-dark {
  background: var(--card);
  border: 1px solid var(--border);
  box-shadow: 0 1px 3px rgb(0 0 0 / 10%);
}

.dark .card-dark {
  @apply bg-zinc-900/95 border border-white/5 backdrop-blur-sm;

  box-shadow: 0 4px 24px rgb(0 0 0 / 40%);
}

.card-dark:hover {
  border-color: rgb(229 57 53 / 20%);
}

.dark .card-dark:hover {
  box-shadow: 0 8px 32px rgb(0 0 0 / 50%);
}

.card-active {
  border-color: var(--brand-accent) !important;
  box-shadow: 0 0 24px var(--brand-accent-glow) !important;
}

/* ── Input Styles ── */

.input-dark {
  background: var(--card);
  color: var(--foreground);
  border: 1px solid var(--border);
  transition: all 0.2s ease;
}

.input-dark::placeholder {
  color: var(--text-muted);
}

.input-dark:focus {
  border-color: rgb(229 57 53 / 50%);
  box-shadow: 0 0 0 3px var(--brand-accent-soft);
}

.dark .input-dark {
  @apply bg-zinc-900 border-white/10 text-white placeholder:text-zinc-500;
}

/* ── Risk levels ── */
.risk-low {
  @apply text-emerald-600 bg-emerald-50 border-emerald-200;
}

.risk-medium {
  @apply text-orange-600 bg-orange-50 border-orange-200;
}

.risk-high {
  @apply text-red-600 bg-red-50 border-red-200;
}

.dark .risk-low {
  @apply text-emerald-500 bg-emerald-500/10 border-emerald-500/20;
}

.dark .risk-medium {
  @apply text-orange-500 bg-orange-500/10 border-orange-500/20;
}

.dark .risk-high {
  @apply text-red-500 bg-red-500/10 border-red-500/20;
}

/* ── KDS Ticket styles ── */
.kds-ticket-normal {
  @apply border-l-4 border-emerald-500 bg-emerald-500/5;
}

.kds-ticket-warning {
  @apply border-l-4 border-orange-500 bg-orange-500/5;
}

.kds-ticket-urgent {
  @apply border-l-4 border-red-500 bg-red-500/5;
}

/* ── Stat Cards ── */

.stat-card-dark {
  background: var(--card);
  border: 1px solid var(--border);
  box-shadow: 0 1px 3px rgb(0 0 0 / 8%);
}

.dark .stat-card-dark {
  @apply bg-zinc-900/95 border border-white/10 backdrop-blur-sm;

  box-shadow: 0 2px 8px rgb(0 0 0 / 30%);
}

.stat-card-dark:hover {
  border-color: rgb(229 57 53 / 20%);
}

.dark .stat-card-dark:hover {
  box-shadow: 0 4px 16px rgb(0 0 0 / 40%);
}

.stat-card-danger {
  @apply bg-red-50 border-red-200;
}

.dark .stat-card-danger {
  @apply bg-red-950/30 border-red-500/30;

  box-shadow: 0 2px 8px rgb(229 57 53 / 20%);
}

.stat-value-primary {
  color: #E53935 !important;
}

/* ── Badges ── */

.badge-success {
  @apply bg-emerald-50 text-emerald-700 border border-emerald-200;
}

.badge-warning {
  @apply bg-orange-50 text-orange-700 border border-orange-200;
}

.badge-danger {
  @apply bg-red-50 text-red-700 border border-red-200;
}

.badge-default {
  @apply bg-zinc-100 text-zinc-700 border border-zinc-200;
}

.dark .badge-success {
  @apply bg-green-950/30 text-green-400 border-green-500/30;
}

.dark .badge-warning {
  @apply bg-orange-950/30 text-orange-400 border-orange-500/30;
}

.dark .badge-danger {
  @apply bg-red-950/30 text-red-400 border-red-500/30;
}

.dark .badge-default {
  @apply bg-zinc-900 text-zinc-300 border-white/10;
}

.progress-bar-red {
  background: linear-gradient(90deg, #E53935 0%, #C62828 100%) !important;
}

.chart-container-dark {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 0.75rem;
  padding: 1.5rem;
}

.dark .chart-container-dark {
  @apply bg-zinc-900/50 border border-white/5;
}

/* ═══════════════════════════════════════════════════════════════
   DARK MODE — TAILWIND COLOR OVERRIDES
   These are scoped under .dark so they ONLY apply in dark mode.
   They remap Tailwind utility classes that were designed for
   light backgrounds to work on dark backgrounds.
   ═══════════════════════════════════════════════════════════════ */

.dark .text-gray-700,
.dark .text-slate-700,
.dark .text-zinc-700 {
  color: #E2E8F0 !important;
}

.dark .text-gray-600,
.dark .text-slate-600,
.dark .text-zinc-600 {
  color: #CBD5E1 !important;
}

.dark .text-gray-500,
.dark .text-slate-500,
.dark .text-zinc-500 {
  color: #94A3B8 !important;
}

.dark .text-gray-400,
.dark .text-slate-400,
.dark .text-zinc-400 {
  color: #CBD5E1 !important;
}

.dark .text-gray-900,
.dark .text-slate-900,
.dark .text-zinc-900 {
  color: #F8FAFC !important;
}

.dark .text-gray-800,
.dark .text-slate-800,
.dark .text-zinc-800 {
  color: #F1F5F9 !important;
}

/* Background overrides for dark containers */
.dark .bg-slate-50,
.dark .bg-gray-50,
.dark .bg-zinc-50 {
  background-color: #09090B !important;
}

.dark .bg-white {
  background-color: #18181B !important;
}

.dark .bg-red-50,
.dark .bg-rose-50 {
  background-color: rgb(229 57 53 / 10%) !important;
}

.dark .border-red-200,
.dark .border-rose-200 {
  border-color: rgb(229 57 53 / 30%) !important;
}

.dark .bg-green-50,
.dark .bg-emerald-50 {
  background-color: rgb(34 197 94 / 10%) !important;
}

.dark .border-green-200,
.dark .border-emerald-200 {
  border-color: rgb(34 197 94 / 30%) !important;
}

.dark .bg-blue-50,
.dark .bg-sky-50 {
  background-color: rgb(59 130 246 / 10%) !important;
}

.dark .border-blue-200,
.dark .border-sky-200 {
  border-color: rgb(59 130 246 / 30%) !important;
}

.dark .text-green-600 {
  color: #4ADE80 !important;
}

.dark .text-red-600 {
  color: #EF4444 !important;
}

/* ═══════════════════════════════════════════════════════════════
   SELECTION, FOCUS, LOADING
   ═══════════════════════════════════════════════════════════════ */

::selection {
  background-color: var(--brand-accent);
  color: white;
}

/* Loading Spinner - Emergent Red */
.loading-spinner {
  border: 3px solid var(--brand-accent-soft);
  border-top-color: var(--brand-accent);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Focus states - Accessible & Branded */
*:focus-visible {
  outline: 2px solid var(--brand-accent);
  outline-offset: 2px;
}

button:focus-visible,
a:focus-visible {
  outline: 2px solid var(--brand-accent);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px var(--brand-accent-soft);
}

/* ═══════════════════════════════════════════════════════════════
   TOAST NOTIFICATIONS — THEME-AWARE
   ═══════════════════════════════════════════════════════════════ */

/* Light mode toasts */
[data-sonner-toast] {
  background: var(--popover) !important;
  border: 1px solid var(--border) !important;
  box-shadow: 0 8px 24px rgb(0 0 0 / 15%) !important;
}

[data-sonner-toast] [data-title] {
  color: var(--foreground) !important;
  font-weight: 600 !important;
}

[data-sonner-toast] [data-description] {
  color: var(--text-secondary) !important;
}

/* Dark mode toasts */
.dark [data-sonner-toast] {
  background: #18181B !important;
  border: 1px solid rgb(255 255 255 / 10%) !important;
  box-shadow: 0 8px 24px rgb(0 0 0 / 60%) !important;
}

.dark [data-sonner-toast] [data-title] {
  color: #F5F5F7 !important;
}

.dark [data-sonner-toast] [data-description] {
  color: #D4D4D8 !important;
}

[data-sonner-toast][data-type="success"] {
  border-color: rgb(67 160 71 / 30%) !important;
  box-shadow: 0 8px 24px rgb(67 160 71 / 20%) !important;
}

[data-sonner-toast][data-type="error"] {
  border-color: rgb(229 57 53 / 30%) !important;
  box-shadow: 0 8px 24px rgb(229 57 53 / 20%) !important;
}

[data-sonner-toast][data-type="warning"] {
  border-color: rgb(251 140 0 / 30%) !important;
  box-shadow: 0 8px 24px rgb(251 140 0 / 20%) !important;
}

[data-sonner-toast][data-type="info"] {
  border-color: rgb(30 136 229 / 30%) !important;
  box-shadow: 0 8px 24px rgb(30 136 229 / 20%) !important;
}

[data-sonner-toast] [data-button] {
  background: var(--brand-accent) !important;
  color: white !important;
  font-weight: 700 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
}

[data-sonner-toast] [data-button]:hover {
  background: var(--brand-accent-hover) !important;
}

/* ═══════════════════════════════════════════════════════════════
   CHART TOKENS & BASE LAYER
   ═══════════════════════════════════════════════════════════════ */

:root {
  --chart-1: 220 70% 50%;
  --chart-2: 160 60% 45%;
  --chart-3: 30 80% 55%;
  --chart-4: 280 65% 60%;
  --chart-5: 340 75% 55%;
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
}

@layer base {
  [data-debug-wrapper="true"] {
    display: contents !important;
  }
}

/* Prevent transition on transforms */
.no-transform-transition {
  transition-property: opacity, background-color, border-color, color;
}